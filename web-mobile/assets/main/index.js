System.register("chunks:///_virtual/_Tools.ts",["cc"],(function(n){"use strict";var t,e,r,o,a;return{setters:[function(n){t=n.cclegacy,e=n.Component,r=n.Button,o=n.v2,a=n.tween}],execute:function(){t._RF.push({},"5cf88DX+t1FhqhOCw0VU0F9","_Tools",void 0);var i=n("Tools",{addClickEvent:function(n,t,o,a,i){var u=new e.EventHandler;u.target=t,u.component=o,u.handler=a,i&&(u.customEventData=i),n.getComponent(r).clickEvents=[],n.getComponent(r).clickEvents.push(u)},randomNum:function(n,t,e){return e?Math.random()*(t-n+1)+n:Math.floor(Math.random()*(t-n+1)+n)},getRandomElement:function(n){var t=n.length;if(t>0){var e=Math.floor(Math.random()*t);return e==t&&(e=t-1),n[e]}return null},getRandomAmountElementUnRepeat:function(n,t){var e=n.length;if(t>=e){for(var r={nodeArr:n,indexArr:[]},o=0;o<n.length;o++)r.indexArr.push(o);return r}if(t<=0)return null;for(var a={nodeArr:[],indexArr:[]},i=[],u=null,s=0;s<t;s++){do{u=Math.floor(Math.random()*e)}while(i.indexOf(u)>-1);i.push(u),a.nodeArr.push(n[u]),a.indexArr.push(u)}return a},isCrit:function(n){var t=this.getRandomAmountElementUnRepeat([0,1,2,3,4,5,6,7,8,9],n);return null!=t&&-1!=t.nodeArr.indexOf(7)},getIndex:function(n,t){for(var e=n.length,r=0;r<e;r++)if(n[r]==t)return r;return-1},removeArray:function(n,t){for(var e=n.length,r=0;r<e;r++)if(n[r]==t)return 0==r?(n.shift(),n):r==e-1?(n.pop(),n):(n.splice(r,1),n)},pointOfRandom:function(n,t,e){for(var r=i.randomNum(Math.floor(n.x-(t-e)),Math.floor(n.x+(t-e))),a=i.randomNum(Math.floor(n.y-(t-e)),Math.floor(n.y+(t-e)));!this.isInRegion(r-n.x,a-n.y,t-e);)r=i.randomNum(Math.floor(n.x-(t-e)),Math.floor(n.x+(t-e))),a=i.randomNum(Math.floor(n.y-(t-e)),Math.floor(n.y+(t-e)));return o(r,a)},isInRegion:function(n,t,e){return n*n+t*t<=e*e},isIntersect:function(n,t,e,r){return Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y))+r>=t},scaleUpAndDowm:function(n,t,e){a(n).to(.3,{scale:1.1},{easing:"sineIn"}).to(.6,{scale:.9},{easing:"sineIn"}).to(.6,{scale:1.1},{easing:"sineIn"}).to(.6,{scale:.9},{easing:"sineIn"}).union().repeatForever().start(),t&&a(e).to(.3,{opacity:255},{easing:"sineIn"}).to(.6,{opacity:0},{easing:"sineIn"}).to(.6,{opacity:255},{easing:"sineIn"}).to(.6,{opacity:0},{easing:"sineIn"}).union().repeatForever().start()},shake:function(n){a(n).to(.1,{rotate:5},{easing:"sineIn"}).to(.2,{rotate:-5},{easing:"sineIn"}).to(.2,{rotate:5},{easing:"sineIn"}).to(.1,{rotate:0},{easing:"sineIn"}).union().repeatForever().start()},jumpOneByOne:function(n){for(var t=n.childrenCount,e=0;e<t;e++)a(n.children[e]).delay(.2*e).to(.2,{scale:1.3},{easing:"backOut"}).to(.2,{scale:1}).delay(.2*(t-1-e)+1).union().repeatForever().start()},toDateFormat:function(){var n=new Date;return{year:(n=new Date(n.getTime())).getFullYear(),month:n.getMonth()+1,day:n.getDate()}},toTimeString2:function(n){if(n<=0)return"00:00:00";n=Math.floor(n);var t=Math.floor(n/3600);n-=3600*t;var e=Math.floor(n/60);return{hour:t,minute:e,s:n-=60*e}},toTimeString:function(n){if(n<=0)return"00:00";n=Math.floor(n),n-=3600*Math.floor(n/3600);var t=Math.floor(n/60),e="";return e+=t>0?t<10?"0"+t:t:"00",e+=":",e+=(n-=60*t)>0?n<10?"0"+n:n:"00"},addNegativeCaculation:function(n,t,e,r){return n?"-"+this.calculation(t,e,r):this.calculation(t,e,r)},calculation:function(n,t,e){var r=Math.floor(n/t),o=Math.floor(n%t/t*10);return 0===o?r+e:r+"."+o+e}});t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["cc"],(function(u){"use strict";var i,o,a;return{setters:[function(u){i=u.cclegacy,o=u.assetManager,a=u.AudioClip}],execute:function(){i._RF.push({},"3b526ILuhpOt41vxkdarjMP","AudioManager",void 0);var n=u("AudioManager",function(){function u(){}return u.init=function(u){this._audioSource=u},u.playMusic=function(){this._audioSource.play()},u.playSound=function(u){var i,n=this,c="audio/sound/"+u,e=this._cachedAudioClipMap[c];e?this._audioSource.playOneShot(e,1):null==(i=o.resources)||i.load(c,a,(function(u,i){u?console.warn(u):(n._cachedAudioClipMap[c]=i,n._audioSource.playOneShot(i,1))}))},u}());n._audioSource=null,n._cachedAudioClipMap={},i._RF.pop()}}}));

System.register("chunks:///_virtual/BtnAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(t){"use strict";var e,n,i,r,o,a,u,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,u=t.Button,c=t.Component},function(t){s=t.AudioManager}],execute:function(){var l,p,d,h;o._RF.push({},"3dcfbxEARhH9IRlfqkh3REA","BtnAdapter",void 0);var f=a.ccclass,y=a.property;t("BtnAdapter",f("BtnAdapter")((d=e((p=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"soundName",d,r(e)),i(e,"delayTime",h,r(e)),e}n(e,t);var o=e.prototype;return o.start=function(){this.node.on(u.EventType.CLICK,this.click,this)},o.click=function(){this.scheduleOnce(this.playSound,this.delayTime)},o.playSound=function(){this.soundName.length<=0||s.playSound(this.soundName)},e}(c)).prototype,"soundName",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=e(p.prototype,"delayTime",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=p))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/Consts.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"13e75VLtz1CDqBjbg0mI7wC","Consts",void 0);t("default",{ColliderTags:{collider:0,player:1,item:2,bullet:3,empty:4,box:5,boom:6,enemy:10},ItemType:{weapon:0,item:1},EquipType:{damage:0,defense:1,speed:2,crit:3},ItemAttr:[[{attr:.1,des:"伤害+10%"},{attr:.2,des:"伤害+20%"},{attr:.3,des:"伤害+30%"}],[{attr:.1,des:"减伤+10%"},{attr:.2,des:"减伤+20%"},{attr:.3,des:"减伤+30%"}],[{attr:.1,des:"移速+10%"},{attr:.2,des:"移速+20%"},{attr:.3,des:"移速+30%"}],[{attr:1,des:"暴击+10%"},{attr:2,des:"暴击+20%"},{attr:3,des:"暴击+30%"}]],TaskState:{Unfinish:0,Canget:1,Got:2}});e._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Consts.ts"],(function(t){"use strict";var a,e,i,r,s,o,n,l;return{setters:[function(t){a=t.createClass},function(t){e=t.cclegacy,i=t.resources,r=t.JsonAsset,s=t.game,o=t.Game,n=t.sys},function(t){l=t.default}],execute:function(){var u;e._RF.push({},"918ebaBNhtCCqx/d3SBph+X","DataManager",void 0),function(t){t[t.READY=0]="READY",t[t.RECORD=1]="RECORD",t[t.PAUSE=2]="PAUSE"}(u||(u={})),t("DataManager",function(){function t(){this.jsonData={},this.MD5Code=void 0,this.userData={isFirstPlay:!0,playerName:"菠萝吹雪",coinNum:0,choosedSkinId:1,unLockedSkinIdArr:[1],playedVideoNum:0,havePieceNum:{26:0,27:0,28:0,29:0,30:0},box1NeedCoinNum:100,box1RewardCoinNum:[50,150],box2RewardCoinNum:[250,500],baseHp:100,baseDamage:1,baseDefense:0,baseSpeed:200,baseCrit:0,baseCd:0,baseRecovery:1,alDieNum:0,allKillNum:0,allPlayNum:0,winNum:0,top5Num:0,winRate:0,kd:0,avgRank:0,mostKill:0,avgLifeTime:0},this.gameData={mapData:{gunNodes:[],roleCtrls:[],allBoxArr:[]},roleData:{maxHp:100,curHp:100,curDamage:0,curDefense:0,curSpeed:200,curCrit:0,curCd:0,curRecovery:0},equipItemAttr:[0,0,0,0]},this.globalData={days:1,curDailyGot:!1,shootInterval:0,reloadInterval:0,maxAmoNum:20,curAmoNum:20,isInGame:!1,inGameKillNum:[],gasConfig:null,getItemAttrArr:[{rank:0,item:null},{rank:0,item:null},{rank:0,item:null},{rank:0,item:null}],lifeTime:0,onLineTime:0,onLineGifts:[2,2,2],onLineGiftCurNum:0,activeValue:0,activityGifts:[2,2,2],activityNum:[0,0,0],activityCurNum:[0,0,0],activityCurCoin:[0,0,0],progressGifts:[0,0,0,0],activityAddNum:[1,3,1],activityAddCoin:[50,100,100],playerNameArr:["隋晗蕾","驹夏之","壬紫雪","华清涵","厍岚彩","依雪兰","俟骊婧","声采珊","愈成济","暴雨","党雁丝","柴俊郎","潜春芳","衷亦巧","越世敏","祈桐","菅昆锐","卑绍钧","浑秀英","牛俊悟","汲永康","虎胤文","宿巧春","海合瑞","朋曾","哈蝶","宏睿文","黎泰然"],recordPath:null,recordTimer:0,recordState:u.READY}}var e=t.prototype;return e.init=function(t){var a=this;i.loadDir("data/",r,(function(e,i){i.forEach((function(t){Object.defineProperty(a.jsonData,t.name,{value:t.json})})),t&&t()}))},e.initGameMapData=function(){this.gameData.mapData.gunNodes=[],this.gameData.mapData.roleCtrls=[],this.gameData.mapData.allBoxArr=[]},e.initGameRoleAttr=function(){this.gameData.roleData.maxHp=this.userData.baseHp,this.gameData.roleData.curHp=this.userData.baseHp,this.gameData.roleData.curDamage=this.userData.baseDamage,this.gameData.roleData.curDefense=this.userData.baseDefense,this.gameData.roleData.curSpeed=this.userData.baseSpeed,this.gameData.roleData.curCrit=this.userData.baseCrit,this.gameData.roleData.curCd=this.userData.baseCd,this.gameData.roleData.curRecovery=this.userData.baseRecovery,this.gameData.equipItemAttr=[0,0,0,0]},e.initSomeAttr=function(){var t=this;s.on(o.EVENT_HIDE,(function(){console.log("进入后台前存储了数据"),n.localStorage.setItem("EatChicken_onLineTime",t.globalData.onLineTime.toString())}));var a=n.localStorage.getItem("EatChicken_dailyGotState");this.globalData.curDailyGot="true"==a;var e=n.localStorage.getItem("EatChicken_onLineTime");null==e||""==e?(this.globalData.onLineTime=0,n.localStorage.setItem("EatChicken_onLineTime","0")):this.globalData.onLineTime=parseInt(e);var i=n.localStorage.getItem("EatChicken_onLineGifts");null==i||""==i?(this.globalData.onLineGifts=[2,2,2],n.localStorage.setItem("EatChicken_onLineGifts",JSON.stringify([2,2,2]))):this.globalData.onLineGifts=JSON.parse(i);var r=n.localStorage.getItem("EatChicken_onLineGiftCurNum");null==r||""==r?(this.globalData.onLineGiftCurNum=0,n.localStorage.setItem("EatChicken_onLineGiftCurNum","0")):this.globalData.onLineGiftCurNum=parseInt(r);var l=n.localStorage.getItem("EatChicken_activeValue");null==l||""==l?(this.globalData.activeValue=0,n.localStorage.setItem("EatChicken_activeValue","0")):this.globalData.activeValue=parseInt(l);var u=n.localStorage.getItem("EatChicken_activityGifts");null==u||""==u?(this.globalData.activityGifts=[2,2,2],n.localStorage.setItem("EatChicken_activityGifts",JSON.stringify([2,2,2]))):this.globalData.activityGifts=JSON.parse(u);var c=n.localStorage.getItem("EatChicken_activityNum");null==c||""==c?(this.globalData.activityNum=[0,0,0],n.localStorage.setItem("EatChicken_activityNum",JSON.stringify([0,0,0]))):this.globalData.activityNum=JSON.parse(c);var m=n.localStorage.getItem("EatChicken_activityCurNum");null==m||""==m?(this.globalData.activityCurNum=[0,0,0],n.localStorage.setItem("EatChicken_activityCurNum",JSON.stringify([0,0,0]))):this.globalData.activityCurNum=JSON.parse(m);var g=n.localStorage.getItem("EatChicken_activityCurCoin");null==g||""==g?(this.globalData.activityCurCoin=[0,0,0],n.localStorage.setItem("EatChicken_activityCurCoin",JSON.stringify([0,0,0]))):this.globalData.activityCurCoin=JSON.parse(g);var h=n.localStorage.getItem("EatChicken_progressGifts");null==h||""==h?(this.globalData.progressGifts=[0,0,0,0],n.localStorage.setItem("EatChicken_progressGifts",JSON.stringify([0,0,0,0]))):this.globalData.progressGifts=JSON.parse(h),this.globalData.inGameKillNum=[],this.globalData.gasConfig=null,this.globalData.getItemAttrArr=[{rank:0,item:null},{rank:0,item:null},{rank:0,item:null},{rank:0,item:null}]},e.setPlayerName=function(t){this.userData.playerName=t,this.save()},e.addCoin=function(t){this.userData.coinNum+=t,this.save()},e.reduceCoin=function(t){var a=this.userData.coinNum-t;return!(a<0)&&(this.userData.coinNum=a,this.save(),!0)},e.unLockSkin=function(t){-1==this.userData.unLockedSkinIdArr.indexOf(t)&&this.userData.unLockedSkinIdArr.push(t)},e.addPieceNum=function(t,a){var e=this;this.userData.havePieceNum[t]+=a;[26,27,28,29,30].forEach((function(t){e.userData.havePieceNum[t]>=e.getSkinDataById(t).needpiece&&e.unLockSkin(t)})),this.save()},e.addPlayedVideoNum=function(){var t=this;this.userData.playedVideoNum++;[21,22,23,24,25].forEach((function(a){t.userData.playedVideoNum>=t.getSkinDataById(a).needgem&&t.unLockSkin(a)})),this.save()},e.getSkinDataById=function(t){return this.jsonData.SkinsData[t-1]},e.setChoosedSkinId=function(t){t>30&&(t=1),t<1&&(t=30),this.userData.choosedSkinId=t,this.addSkinAttr(),this.save()},e.addSkinAttr=function(){var t=this.getSkinDataById(this.userData.choosedSkinId);this.gameData.roleData.maxHp=this.userData.baseHp+Math.floor(this.userData.baseHp*(t.att_hpmax/100)),this.gameData.roleData.curHp=this.gameData.roleData.maxHp,this.gameData.roleData.curDamage=this.userData.baseDamage+t.att_damage/100,this.gameData.roleData.curCrit=this.userData.baseCrit+t.att_crit/10,this.gameData.roleData.curSpeed=this.userData.baseSpeed+Math.floor(this.userData.baseSpeed*(t.att_speed/100)),this.gameData.roleData.curCd=this.userData.baseCd+t.att_cd/100,this.gameData.roleData.curDefense=this.userData.baseDefense+t.att_defense/100,this.gameData.roleData.curRecovery=this.userData.baseRecovery+t.att_recovery/100},e.getChoosedSkinId=function(){return this.userData.choosedSkinId},e.reduceHp=function(t){var a=this.gameData.roleData.curHp-t;return a<=0?(this.gameData.roleData.curHp=0,!1):(this.gameData.roleData.curHp=a,!0)},e.addHp=function(t){var a=this.gameData.roleData.curHp+t;a>this.gameData.roleData.maxHp?this.gameData.roleData.curHp=this.gameData.roleData.maxHp:this.gameData.roleData.curHp=a},e.getResumeHealthNum=function(){return 10*this.gameData.roleData.curRecovery},e.getSkillCD=function(){return 10*(1-this.gameData.roleData.curCd)},e.reduceAmo=function(){var t=this.globalData.curAmoNum-1;return t<0?(this.globalData.curAmoNum=0,!1):(this.globalData.curAmoNum=t,!0)},e.reloadAmo=function(){this.globalData.curAmoNum=this.globalData.maxAmoNum},e.addKillNum=function(t,a){return 1==t?t=0:t-=9,this.globalData.inGameKillNum[t]._killNum++,this.globalData.inGameKillNum[t]._belongName=a,this.globalData.inGameKillNum[t]._killNum},e.equipBoxItem=function(t){var a=this.globalData.getItemAttrArr[t].rank+1;this.globalData.getItemAttrArr[t]={rank:a,item:l.ItemAttr[t][a-1]},this.gameData.equipItemAttr[t]=this.globalData.getItemAttrArr[t].item.attr},e.getEquipItemAttr=function(t){return this.gameData.equipItemAttr[t]},e.getEquipShowAttr=function(){var t=[];for(var a in this.globalData.getItemAttrArr){0==this.globalData.getItemAttrArr[a].rank?t.push(null):t.push(this.globalData.getItemAttrArr[a])}return t},e.getOnLineGiftsState=function(t){return this.globalData.onLineGifts[t]},e.getActivityGiftsState=function(t){return this.globalData.activityGifts[t]},e.setOnLineGiftsState=function(t,a){this.globalData.onLineGifts[t]=a,n.localStorage.setItem("EatChicken_onLineGifts",JSON.stringify(this.globalData.onLineGifts))},e.setActivityGiftsState=function(t,a){this.globalData.activityGifts[t]=a,n.localStorage.setItem("EatChicken_activityGifts",JSON.stringify(this.globalData.activityGifts))},e.getOnlineTimeMinute=function(){var t=Math.floor(this.globalData.onLineTime),a=Math.floor(t/3600);t-=3600*a;var e=Math.floor(t/60);return Math.floor(60*a+e)},e.addActiveValue=function(t){var a=this.globalData.activeValue+t;a>120&&(a=120),this.globalData.activeValue=a;var e=[30,60,90,120];for(var i in e)0==this.globalData.progressGifts[i]&&this.globalData.activeValue>=e[i]&&this.setProgressGifts(i,1);n.localStorage.setItem("EatChicken_activeValue",this.globalData.activeValue.toString())},e.addActivityNum=function(t,a){this.globalData.activityNum[t]+=a,n.localStorage.setItem("EatChicken_activityNum",JSON.stringify(this.globalData.activityNum))},e.setProgressGifts=function(t,a){this.globalData.progressGifts[t]=a,n.localStorage.setItem("EatChicken_progressGifts",JSON.stringify(this.globalData.progressGifts))},e.save=function(){n.localStorage.setItem("EatChicken_UserData",JSON.stringify(this.userData))},e.changeRecordState=function(t){this.globalData.recordState=t},e.setMD5Code=function(t){this.MD5Code=t},e.getMD5Code=function(){return this.MD5Code},a(t,null,[{key:"ins",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/DataType.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"2ff73g4lBlOTp+bPJ5vi4ju","DataType",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,n,o,e,r;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,e=t.RigidBody2D,r=t.Component}],execute:function(){var c;n._RF.push({},"4e5b9vdGKxHR5j8f0ssyOy6","Enemy",void 0);var s=o.ccclass;o.property,t("Enemy",s("Enemy")(c=function(t){function n(){for(var i,n=arguments.length,o=new Array(n),e=0;e<n;e++)o[e]=arguments[e];return(i=t.call.apply(t,[this].concat(o))||this)._isDie=void 0,i._rigidbody=void 0,i}i(n,t);var o=n.prototype;return o.onLoad=function(){this._rigidbody=this.getComponent(e),this._rigidbody.enabledContactListener=!0,this._rigidbody.fixedRotation=!0},o.init=function(t,i){},o.update=function(t){},n}(r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["cc"],(function(n){"use strict";var t,e,r;return{setters:[function(n){t=n.cclegacy,e=n._decorator,r=n.EventTarget}],execute:function(){var c;t._RF.push({},"0a440y4LAdGBaOVHp5JTBKk","EventManager",void 0);var a=e.ccclass,o=(e.property,new r);n("EventManager",a("EventManager")(c=function(){function n(){}return n.on=function(n,t,e){o.on(n,t,e)},n.off=function(n,t,e){o.off(n,t,e)},n.emit=function(n,t,e,r,c,a){o.emit(n,t,e,r,c,a)},n}())||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/EventType.ts",["cc"],(function(E){"use strict";var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){var T;E("EventType",void 0),_._RF.push({},"9bd89IeBehPg627nVnfSmJt","EventType",void 0),function(E){E[E.EVENT_UPDATE_SHOP_CHOOSED_SHOW=0]="EVENT_UPDATE_SHOP_CHOOSED_SHOW",E[E.EVENT_UPDATE_COIN_SHOW=1]="EVENT_UPDATE_COIN_SHOW",E[E.EVENT_UPDATE_AMO_SHOW=2]="EVENT_UPDATE_AMO_SHOW",E[E.EVENT_PLAYER_SHOOT=3]="EVENT_PLAYER_SHOOT",E[E.EVENT_PLAYER_RELOAD=4]="EVENT_PLAYER_RELOAD",E[E.EVENT_UPDATE_TOPBAR_SHOW=5]="EVENT_UPDATE_TOPBAR_SHOW",E[E.EVENT_SHOW_ALLROLENUM_UI=6]="EVENT_SHOW_ALLROLENUM_UI",E[E.EVENT_SHOW_RELOAD_UI=7]="EVENT_SHOW_RELOAD_UI",E[E.EVENT_AIM=8]="EVENT_AIM",E[E.EVENT_GAME_BEGIN=9]="EVENT_GAME_BEGIN",E[E.EVENT_UPDATE_MIPMAP_PLAYER=10]="EVENT_UPDATE_MIPMAP_PLAYER",E[E.EVENT_THEGAMESTART=11]="EVENT_THEGAMESTART",E[E.EVENT_UPDATE_RANK_SHOW=12]="EVENT_UPDATE_RANK_SHOW",E[E.EVENT_UPDATE_GAS_SHOW=13]="EVENT_UPDATE_GAS_SHOW",E[E.EVENT_FLASH=14]="EVENT_FLASH",E[E.EVENT_RESUME_HEALTH=15]="EVENT_RESUME_HEALTH",E[E.EVENT_DROP_BOX=16]="EVENT_DROP_BOX",E[E.EVENT_NOTYFY_BOX_DISMISS=17]="EVENT_NOTYFY_BOX_DISMISS",E[E.EVENT_NOTYFY_BOOM_DISMISS=18]="EVENT_NOTYFY_BOOM_DISMISS",E[E.EVENT_SHOW_BOXITEM=19]="EVENT_SHOW_BOXITEM",E[E.EVENT_UPDATE_STAR_SHOW=20]="EVENT_UPDATE_STAR_SHOW",E[E.EVENT_NOTIFY_ENEMY_MAPBOX=21]="EVENT_NOTIFY_ENEMY_MAPBOX",E[E.EVENT_SHOW_ACTIVITYBTN=22]="EVENT_SHOW_ACTIVITYBTN",E[E.EVENT_jOYSTICK_MOVE=23]="EVENT_jOYSTICK_MOVE",E[E.EVENT_PLAYER_PICKUP_WEAPON=24]="EVENT_PLAYER_PICKUP_WEAPON",E[E.EVENT_UI_SHOW_PICKUP_WEAPON=25]="EVENT_UI_SHOW_PICKUP_WEAPON"}(T||(T=E("EventType",{}))),_._RF.pop()}}}));

System.register("chunks:///_virtual/FightMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Consts.ts","./Tools.ts","./DataManager.ts","./UIManager.ts","./Enemy.ts","./Item.ts","./Player.ts"],(function(t){"use strict";var e,i,n,o,a,r,l,s,c,u,p,h,d,f,m,b,g,y,j,M,v,_,N,P,z;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Node,s=t.Prefab,c=t.SpriteAtlas,u=t.size,p=t.TiledMap,h=t.UITransform,d=t.instantiate,f=t.BoxCollider2D,m=t.v2,b=t.Sprite,g=t.v3,y=t.Component},function(t){j=t.default},function(t){M=t.default},function(t){v=t.DataManager},function(t){_=t.UIManager},function(t){N=t.Enemy},function(t){P=t.Item},function(t){z=t.Player}],execute:function(){var O,D,S,w,C,x,I,A,E,T,G,F,L,R,k;a._RF.push({},"781c5dxCx5PjJH6VK1H1VTs","FightMap",void 0);var H=r.ccclass,U=r.property;t("Map",(O=H("Map"),D=U(l),S=U(l),w=U(l),C=U(s),x=U(s),I=U(c),O((T=e((E=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"mapNode",T,o(e)),n(e,"colliderNode",G,o(e)),n(e,"objectNode",F,o(e)),n(e,"colliderPrefab",L,o(e)),n(e,"objectPrefab",R,o(e)),n(e,"mapAtlas",k,o(e)),e._tiledMap=null,e._tiledMapSize=u(),e}i(e,t);var a=e.prototype;return a.onLoad=function(){this._tiledMap=this.mapNode.getComponent(p),this._tiledMapSize=this.mapNode.getComponent(h).contentSize},a.start=function(){v.ins.init(this.init.bind(this))},a.init=function(){this.initCollisionObject(),this.initDynamicObject(),this.initPlayerObject(),this.initEnemyObject(5),this.initWeaponItemObject(),this.schedule(this.sortAllObject,.1)},a.initCollisionObject=function(){var t=this;this._tiledMap.getObjectGroup("collision").getObjects().forEach((function(e){var i=e.x-t._tiledMapSize.width/2,n=e.y-t._tiledMapSize.height/2,o=d(t.colliderPrefab);o.setPosition(i,n),o.setParent(t.colliderNode);var a=o.getComponent(f);a.size=u(e.width,e.height),a.offset=m(e.width/2,-e.height/2),a.tag=j.ColliderTags.collider,a.apply()}))},a.initDynamicObject=function(){var t=this,e=this._tiledMap.getLayer("wall"),i=this._tiledMap.getTileSize();this._tiledMap.getObjectGroup("dynamic").getObjects().forEach((function(n){var o=t.mapAtlas.getSpriteFrame(n.name.split(".")[0]);if(o){var a=Math.floor(n.x/i.width),r=Math.floor((t._tiledMapSize.height-n.y)/i.height),l=e.getPositionAt(a,r),s=l.x-t._tiledMapSize.width/2,c=l.y-t._tiledMapSize.height/2,u=d(t.objectPrefab);u.getComponent(h).setAnchorPoint(0,0),u.getComponent(b).spriteFrame=o,u.setParent(t.objectNode),u.setPosition(s,c)}}))},a.initPlayerObject=function(){_.showGameObject("Player",(function(t){t.setPosition(0,0);var e=t.getComponent(z);v.ins.gameData.mapData.roleCtrls.push(e)}),this.objectNode)},a.initEnemyObject=function(t){var e=this,i={};this._tiledMap.getObjectGroup("enemy").getObjects().forEach((function(t){var n=t.x-e._tiledMapSize.width/2,o=t.y-e._tiledMapSize.height/2;i[t.name]=m(n,o)}));for(var n=[],o=0;o<t;o++)n.push(g(M.randomNum(i.xy.x,i.x.x),M.randomNum(i.xy.y,i.y.y)));for(var a=j.ColliderTags.enemy,r=function(t){if(t+1==v.ins.userData.choosedSkinId)return"continue";_.showGameObject("Enemy",(function(e){e.getComponent(f).tag=a++,e.setPosition(n[t]);var i=e.getComponent(N);i.init(t+1,v.ins.jsonData.RobotName[t]),v.ins.globalData.inGameKillNum.push({_killNum:0,_belongName:v.ins.jsonData.RobotName[t]}),v.ins.gameData.mapData.roleCtrls.push(i)}),e.objectNode)},l=0;l<n.length;l++)r(l)},a.initWeaponItemObject=function(){var t=this,e=[];this._tiledMap.getObjectGroup("gun").getObjects().forEach((function(i){var n=i.x-t._tiledMapSize.width/2,o=i.y-t._tiledMapSize.height/2;e.push(g(n,o))}));for(var i=v.ins.jsonData.WeaponData.length,n=function(n){_.showGameObject("Item",(function(t){t.setPosition(e[n]);var o=M.randomNum(0,i-1);t.getComponent(P).init(j.ItemType.weapon,o),v.ins.gameData.mapData.gunNodes.push(t)}),t.objectNode)},o=0;o<e.length;o++)n(o)},a.sortAllObject=function(){for(var t=this.objectNode.children.concat(),e=[],i=[],n=0;n<t.length;n++)_.isInMapSight(t[n])&&(e.push({y:t[n].position.y,index:n}),i.push(n));for(var o in e.sort((function(t,e){return e.y-t.y})),e)t[e[o].index].setSiblingIndex(i[o])},a.update=function(t){},e}(y)).prototype,"mapNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(E.prototype,"colliderNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(E.prototype,"objectNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(E.prototype,"colliderPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(E.prototype,"objectPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(E.prototype,"mapAtlas",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=E))||A));a._RF.pop()}}}));

System.register("chunks:///_virtual/FightUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventType.ts","./EventManager.ts"],(function(e){"use strict";var t,n,i,o,r,a,p,c,s,l,u,h,f,U;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,p=e.Node,c=e.SpriteAtlas,s=e.Sprite,l=e.Label,u=e.tween,h=e.Component},function(e){f=e.EventType},function(e){U=e.EventManager}],execute:function(){var g,_,m,y,P,W,E;r._RF.push({},"30b98QwfwVO/q9Iyag+88uy","FightUI",void 0);var v=a.ccclass,d=a.property;e("FightUI",(g=v("FightUI"),_=d(p),m=d(c),g((W=t((P=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"pickUpWeapon",W,o(t)),i(t,"commonAtlas",E,o(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){U.on(f.EVENT_UI_SHOW_PICKUP_WEAPON,this.showPickUpWeapon,this)},r.onDestroy=function(){U.off(f.EVENT_UI_SHOW_PICKUP_WEAPON,this.showPickUpWeapon,this)},r.showPickUpWeapon=function(e,t){t&&(this.pickUpWeapon.getComponent(s).spriteFrame=this.commonAtlas.getSpriteFrame("ui_weapon_"+t.weaponid),this.pickUpWeapon.children[1].children[0].getComponent(l).string=t.name,u(this.pickUpWeapon.children[0]).by(.2,{angle:90}).repeatForever().start()),this.pickUpWeapon.active=e},r.clickPickUpWeapon=function(){U.emit(f.EVENT_PLAYER_PICKUP_WEAPON)},r.update=function(e){},t}(h)).prototype,"pickUpWeapon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(P.prototype,"commonAtlas",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=P))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameRoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./UIManager.ts"],(function(t){"use strict";var o,e,n,i,r,a,s,c,u,p;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.director,r=t.AudioSource,a=t.PhysicsSystem2D,s=t.v2,c=t.Component},function(t){u=t.AudioManager},function(t){p=t.UIManager}],execute:function(){var d;e._RF.push({},"e92bcHekiRDmaEnt+TSRqTs","GameRoot",void 0);var f=n.ccclass;n.property,t("GameRoot",f("GameRoot")(d=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.onLoad=function(){i.addPersistRootNode(this.node);var t=this.getComponent(r);u.init(t),p.init(),a.instance.gravity=s()},n.start=function(){},e}(c))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["cc"],(function(t){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"6c9b0Cq0sdPGb8QWmPKoA5S","Global",void 0);t("DelayParams",{});c._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Consts.ts","./DataManager.ts","./UIManager.ts"],(function(e){"use strict";var t,n,o,i,a,r,s,c,p,l,d,m,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.BoxCollider2D,a=e.UIOpacity,r=e.tween,s=e.v3,c=e.Sprite,p=e.Label,l=e.Component},function(e){d=e.default},function(e){m=e.DataManager},function(e){u=e.UIManager}],execute:function(){var h;n._RF.push({},"b084e4+/KNBNKkPlVe6KfRG","Item",void 0);var g=o.ccclass;o.property,e("Item",g("Item")(h=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).itemType=0,t.kind=0,t}t(n,e);var o=n.prototype;return o.onLoad=function(){this.getComponent(i).tag=d.ColliderTags.item,this.doAnim()},o.doAnim=function(){var e=this.node.children[0].getComponent(a);r(e).to(.6,{opacity:0}).to(.3,{opacity:255}).union().repeatForever().start(),r(this.node.children[1]).by(.5,{position:s(0,10)}).by(.5,{position:s(0,-10)}).union().repeatForever().start()},o.init=function(e,t){var n=this;this.itemType=e,this.kind=t,u.loadSpriteAltas("comm",(function(o){e==d.ItemType.weapon?(n.node.children[2].active=!1,n.node.children[1].getComponent(c).spriteFrame=o.getSpriteFrame("item_weapon_"+m.ins.jsonData.WeaponData[t].skinname)):(n.node.children[2].active=!0,n.node.children[2].getComponent(p).string=m.ins.jsonData.WeaponData[t].name,n.node.children[1].getComponent(c).spriteFrame=o.getSpriteFrame("item_equip_1_valid"))}))},n}(l))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventType.ts","./Player.ts","./EventManager.ts"],(function(t){"use strict";var i,o,e,n,s,c,r,a,h,p,u,y,l,d,_,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,c=t._decorator,r=t.Node,a=t.Enum,h=t.v3,p=t.v2,u=t.UITransform,y=t.UIOpacity,l=t.Component},function(t){d=t.EventType},function(t){_=t.SpeedType},function(t){v=t.EventManager}],execute:function(){var E,T,f,g,L,O,k,m,P;t("JoystickType",void 0),s._RF.push({},"017b5X8njtGoLXn7s8Ns2Ul","Joystick",void 0);var C,b=c.ccclass,F=c.property;!function(t){t[t.FIXED=0]="FIXED",t[t.FOLLOW=1]="FOLLOW"}(C||(C=t("JoystickType",{})));t("Joystick",(E=b("Joystick"),T=F({type:r,displayName:"杆子",tooltip:"摇杆操纵点"}),f=F({type:r,displayName:"底部圈子",tooltip:"摇杆背景节点"}),g=F({type:a(C),displayName:"触摸类型",tooltip:"定死的还是随触摸位置变化的"}),E((k=i((O=function(t){function i(){for(var i,o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return i=t.call.apply(t,[this].concat(s))||this,e(i,"dot",k,n(i)),e(i,"ring",m,n(i)),e(i,"joystickType",P,n(i)),i._stickPos=h(),i._touchLocation=p(),i._radius=0,i}o(i,t);var s=i.prototype;return s.onLoad=function(){this._radius=this.ring.getComponent(u).width/2,this._initTouchEvent(),this.joystickType==C.FOLLOW&&(this.node.getComponent(y).opacity=0)},s._initTouchEvent=function(){this.node.on(r.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(r.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(r.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(r.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},s._touchStartEvent=function(t){var i=t.getUILocation(),o=h(i.x,i.y),e=this.node.getComponent(u).convertToNodeSpaceAR(o);if(this.joystickType===C.FIXED){this._stickPos=this.ring.position;var n=h(e).subtract(this._stickPos).length();this._radius>n&&this.dot.setPosition(e)}else this.joystickType===C.FOLLOW&&(this._stickPos=e,this.node.getComponent(y).opacity=255,this._touchLocation=i,this.ring.setPosition(e),this.dot.setPosition(e))},s._touchMoveEvent=function(t){if(this.joystickType===C.FOLLOW&&this._touchLocation===t.getUILocation())return!1;var i=t.getUILocation(),o=h(i.x,i.y),e=this.ring.getComponent(u).convertToNodeSpaceAR(o),n=e.length(),s=this._stickPos.x+e.x,c=this._stickPos.y+e.y,r=h(s,c).subtract(this._stickPos).normalize(),a=_.NORMAL;if(this._radius>n)this.dot.setPosition(h(s,c));else{var p=this._stickPos.x+r.x*this._radius,y=this._stickPos.y+r.y*this._radius;this.dot.setPosition(h(p,y)),a=_.FAST}v.emit(d.EVENT_jOYSTICK_MOVE,a,r)},s._touchEndEvent=function(){this.dot.setPosition(this.ring.position),this.joystickType==C.FOLLOW&&(this.node.getComponent(y).opacity=0),v.emit(d.EVENT_jOYSTICK_MOVE,_.STOP)},i}(l)).prototype,"dot",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(O.prototype,"ring",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(O.prototype,"joystickType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.FIXED}}),L=O))||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameRoot.ts","./Consts.ts","./DataType.ts","./EventType.ts","./Global.ts","./Tools.ts","./_Tools.ts","./FightMap.ts","./Enemy.ts","./Item.ts","./Player.ts","./FightUI.ts","./AudioManager.ts","./DataManager.ts","./EventManager.ts","./UIManager.ts","./BtnAdapter.ts","./Joystick.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Consts.ts","./EventType.ts","./Tools.ts","./AudioManager.ts","./DataManager.ts","./EventManager.ts","./UIManager.ts","./Item.ts"],(function(e){"use strict";var t,i,n,a,o,r,s,l,p,h,d,c,u,_,m,g,y,D,f,v,T,S,C,E,A,N,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.sp,l=e.Node,p=e.v3,h=e.RigidBody2D,d=e.Collider2D,c=e.Contact2DType,u=e.director,_=e.Director,m=e.misc,g=e.Vec2,y=e.v2,D=e.PHYSICS_2D_PTM_RATIO,f=e.Component},function(e){v=e.default},function(e){T=e.EventType},function(e){S=e.default},function(e){C=e.AudioManager},function(e){E=e.DataManager},function(e){A=e.EventManager},function(e){N=e.UIManager},function(e){b=e.Item}],execute:function(){var P,w,I,W,k,O,M,U,H,R,V,L,j;e("SpeedType",void 0),o._RF.push({},"26625Jol+RCgoRsiZAzX0Lm","Player",void 0);var z,x=r.ccclass,B=r.property;!function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.FAST=2]="FAST"}(z||(z=e("SpeedType",{})));e("Player",(P=x("Player"),w=B({type:s.Skeleton,tooltip:"角色的Spine动画组件"}),I=B({type:s.Skeleton,tooltip:"枪的Spine动画组件"}),W=B({type:l,tooltip:"指示箭头"}),k=B({type:s.SkeletonData,tooltip:"枪支皮肤数据分组"}),O=B({type:s.SkeletonData,tooltip:"枪支皮肤数据分组"}),P((H=t((U=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"roleAnim",H,a(t)),n(t,"gunAnim",R,a(t)),n(t,"arrowNode",V,a(t)),n(t,"gunSkinData1",L,a(t)),n(t,"gunSkinData2",j,a(t)),t.skinData={},t._moveDir=p(),t._moveSpeed=0,t._speedType=z.STOP,t._itemCtrl=null,t._weaponData={},t._gunDir=p(1,0),t._aiming=!1,t._roleHaveWeapon=!1,t._mapHaveWeapon=!0,t._dead=void 0,t._rigidbody=void 0,t}i(t,e);var o=t.prototype;return o.onLoad=function(){this._rigidbody=this.getComponent(h),this._rigidbody.enabledContactListener=!0,this._rigidbody.fixedRotation=!0;var e=this.getComponent(d);e.tag=v.ColliderTags.player,e.apply(),e.on(c.BEGIN_CONTACT,this.onBeginContact,this),e.on(c.END_CONTACT,this.onEndContact,this),A.on(T.EVENT_jOYSTICK_MOVE,this.joystickMove,this),A.on(T.EVENT_PLAYER_PICKUP_WEAPON,this.pickUpWeapon,this)},o.onDestroy=function(){var e=this.getComponent(d);e.off(c.BEGIN_CONTACT,this.onBeginContact,this),e.off(c.END_CONTACT,this.onEndContact,this),A.off(T.EVENT_jOYSTICK_MOVE,this.joystickMove,this),A.off(T.EVENT_PLAYER_PICKUP_WEAPON,this.joystickMove,this)},o.start=function(){},o.onBeginContact=function(e,t){t.tag==v.ColliderTags.item&&(this._itemCtrl=t.node.getComponent(b),this._itemCtrl.itemType==v.ItemType.weapon?this._roleHaveWeapon?A.emit(T.EVENT_UI_SHOW_PICKUP_WEAPON,!0,E.ins.jsonData.WeaponData[this._itemCtrl.kind]):(S.removeArray(E.ins.gameData.mapData.gunNodes,t.node),u.once(_.EVENT_AFTER_PHYSICS,(function(){t.node.destroy()})),this.pickUpWeapon()):this._itemCtrl.itemType==v.ItemType.item&&this.pickUpItem())},o.onEndContact=function(e,t){console.log("onEndContact"),t.tag==v.ColliderTags.item&&(this._itemCtrl.itemType==v.ItemType.weapon?(this._itemCtrl=null,A.emit(T.EVENT_UI_SHOW_PICKUP_WEAPON,!1)):(this._itemCtrl.itemType,v.ItemType.item))},o.pickUpWeapon=function(){C.playSound("pick_item");var e=this._itemCtrl.kind;if(this._roleHaveWeapon){var t=E.ins.jsonData.WeaponData.indexOf(this._weaponData);this._itemCtrl.init(v.ItemType.weapon,t),A.emit(T.EVENT_UI_SHOW_PICKUP_WEAPON,!0,this._weaponData)}this.equipWeapon(e)},o.equipWeapon=function(e){A.emit(T.EVENT_SHOW_RELOAD_UI,!0),this._roleHaveWeapon=!0,this._weaponData=E.ins.jsonData.WeaponData[e],E.ins.globalData.shootInterval=this._weaponData.shootdelay,E.ins.globalData.reloadInterval=this._weaponData.reloaddelay,E.ins.globalData.maxAmoNum=this._weaponData.clipnum,E.ins.reloadAmo(),this.gunAnim.skeletonData=e<3?this.gunSkinData1:this.gunSkinData2,this.gunAnim.setSkin(this._weaponData.skinname),this.gunAnim.node.active=!0,this.arrowNode.active=!1,this.setWeaponDir(this._moveDir)},o.setWeaponDir=function(e){if(this._roleHaveWeapon&&this.gunAnim.node){this._gunDir=e;var t=m.radiansToDegrees(Math.atan2(e.y,e.x));this.gunAnim.node.angle=t;var i=90-t;i>180||i<0?this.gunAnim.node.setScale(1,-1):this.gunAnim.node.setScale(1,1)}},o.pickUpItem=function(){},o._searchNearestEnemy=function(){var e=this;if(!this._dead){var t=E.ins.gameData.mapData.roleCtrls.concat();S.removeArray(t,this.getComponent("Player"));var i=1e6,n=-1;if(t.forEach((function(t,a){var o=p(t.node.position).subtract(e.node.position).length();o<i&&o<1.4*e._weaponData.range&&(i=o,n=a)})),-1==n)this._aiming=!1;else{this._aiming=!0;var a=p(t[n].node.position).subtract(this.node.position).normalize();this.setWeaponDir(a)}}},o._searchNearestWeapon=function(){var e=this;if(!this._dead){var t=E.ins.gameData.mapData.gunNodes.concat(),i=1e6,n=-1;if(t.forEach((function(t,a){var o=p(t.position).subtract(e.node.position).length();o<i&&(i=o,n=a)})),-1==n)this.arrowNode.active=!1;else{this.arrowNode.active=!0;var a=p(t[n].position).subtract(this.node.position).normalize();this._setArrowDir(a)}}},o._setArrowDir=function(e){this.arrowNode.setPosition(p(this.arrowNode.parent.position).add(p(e).multiplyScalar(100))),this.arrowNode.children[0].children[0].setPosition(p(this.arrowNode.children[0].position).add(p(e).multiplyScalar(30))),this.arrowNode.children[0].children[0].angle=m.radiansToDegrees(Math.atan2(e.y,e.x))},o.joystickMove=function(e,t){if(!this._dead&&(t&&(this._moveDir=t,this._aiming||this.setWeaponDir(t)),this._speedType!=e)){this._speedType=e;this.roleAnim&&this.roleAnim.setAnimation(0,["await","run2","run2"][e],!0)}},o._move=function(e){if(0!=this._moveSpeed){S.delay((function(){C.playSound("run")}),.3,e,!0);var t=90-m.radiansToDegrees(Math.atan2(this._moveDir.y,this._moveDir.x));if(t>180||t<0?this.roleAnim.node.setScale(-1,1):this.roleAnim.node.setScale(1,1),null!=this._rigidbody){var i=y(this._moveDir.x,this._moveDir.y).multiplyScalar(this._moveSpeed/D);this._rigidbody.linearVelocity=i}else{var n=p(this._moveDir).multiplyScalar(this._moveSpeed*e),a=p(this.node.position).add(n);this.node.setPosition(a)}}else null==this._rigidbody||this._rigidbody.linearVelocity.equals(g.ZERO)||(this._rigidbody.linearVelocity=y())},o.update=function(e){if(!this._dead){switch(this._speedType){case z.STOP:this._moveSpeed=0;break;case z.NORMAL:this._moveSpeed=E.ins.gameData.roleData.curSpeed;break;case z.FAST:var t=E.ins.gameData.roleData.curSpeed,i=Math.floor(E.ins.gameData.roleData.curSpeed*E.ins.getEquipItemAttr(v.EquipType.speed));this._moveSpeed=t+i}this._move(e),!this._roleHaveWeapon&&this._mapHaveWeapon?S.delay(this._searchNearestWeapon.bind(this),.05,e,!0):S.delay(this._searchNearestEnemy.bind(this),.05,e,!0)}},o.lateUpdate=function(e){N.cameraFollow(this.node.position)},t}(f)).prototype,"roleAnim",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(U.prototype,"gunAnim",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(U.prototype,"arrowNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(U.prototype,"gunSkinData1",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(U.prototype,"gunSkinData2",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=U))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/Tools.ts",["cc","./Global.ts"],(function(t){"use strict";var n,r;return{setters:[function(t){n=t.cclegacy},function(t){r=t.DelayParams}],execute:function(){n._RF.push({},"f749eDN0sBNuYnzySYabMeX","Tools",void 0);t("default",{delay:function(t,n,e,o){var a=t.name?t.name:t.toString();r.hasOwnProperty(a)||(r[a]=o?0:n),r[a]-=e,r[a]<0&&(r[a]=n-e,t())},randomNum:function(t,n,r){return r?Math.random()*(n-t+1)+t:Math.floor(Math.random()*(n-t+1)+t)},removeArray:function(t,n){for(var r=t.length,e=0;e<r;e++)if(t[e]==n)return 0==e?(t.shift(),t):e==r-1?(t.pop(),t):(t.splice(e,1),t)}});n._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["cc"],(function(a){"use strict";var t,e,n,r,o,i,s,c,p,u,l;return{setters:[function(a){t=a.cclegacy,e=a._decorator,n=a.find,r=a.UITransform,o=a.Camera,i=a.v3,s=a.resources,c=a.SpriteAtlas,p=a.SpriteFrame,u=a.Prefab,l=a.instantiate}],execute:function(){var m,f;t._RF.push({},"e6da3fFspBBKYJTvXjFNcNB","UIManager",void 0);var h=e.ccclass;e.property,a("UIManager",h("UIManager")(((f=function(){function a(){}return a.init=function(){this._mapCamera=n("Canvas/MapCamera")},a.isInMapSight=function(a){var t=n("Canvas").getComponent(r),e=t.width/.9,s=t.height/.9,c=this._mapCamera.getComponent(o).worldToScreen(a.getComponent(r).convertToWorldSpaceAR(i(0,0)));return!(c.x<0||c.x>e||c.y<0||c.y>s)},a.cameraFollow=function(a){this._mapCamera.setPosition(a)},a.load=function(a,t,e){var n=this,r=this._cacheAssetMap[a];r?e&&e(r):s.load(a,t,(function(t,r){t?console.warn(t):(n._cacheAssetMap[a]=r,e&&e(r))}))},a.loadSpriteAltas=function(a,t){var e="plist/"+a;this.load(e,c,t)},a.loadSpriteFrame=function(a,t){var e="sprite/"+a;this.load(e,p,t)},a.showGameObject=function(a,t,e){var n="prefab/game/"+a;this.load(n,u,(function(a){var n=l(a);e&&n.setParent(e),t&&t(n)}))},a}())._cacheAssetMap={},f._mapCamera=null,m=f))||m);t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});